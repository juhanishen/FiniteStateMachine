This is an implementation of one type Finite State Machine